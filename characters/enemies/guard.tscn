[gd_scene load_steps=14 format=3 uid="uid://1tgqyy0vap4u"]

[ext_resource type="Script" uid="uid://l0wj82aga8fk" path="res://characters/enemies/Guard.cs" id="1_ps64d"]
[ext_resource type="PackedScene" uid="uid://k0h0vw2gdnr1" path="res://characters/player/char/char.tscn" id="2_p32lx"]
[ext_resource type="PackedScene" uid="uid://bx0l3cy5mpp56" path="res://characters/attacks/standing_attack.tscn" id="3_h42f4"]
[ext_resource type="PackedScene" uid="uid://dgbqjd8kkka3" path="res://ai/vision.tscn" id="3_ps64d"]
[ext_resource type="BehaviorTree" uid="uid://6d7v4guddh2k" path="res://ai/behavior_trees/guard.tres" id="10_m4qf5"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_p32lx"]
height = 1.5
radius = 0.44

[sub_resource type="BoxShape3D" id="BoxShape3D_ps64d"]
size = Vector3(8, 16, 16)

[sub_resource type="Curve" id="Curve_l60n4"]
_data = [Vector2(0.0026455, 0.883706), 0.0, 1.60016, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_ixbpm"]
width = 32
curve = SubResource("Curve_l60n4")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_vhper"]
emission_shape = 1
emission_sphere_radius = 0.1
direction = Vector3(1, 1, 0)
spread = 90.0
initial_velocity_min = 0.1
initial_velocity_max = 0.35
gravity = Vector3(0, 0.5, 0)
tangential_accel_min = -2.23517e-06
tangential_accel_max = 0.199998
scale_min = 0.2
scale_max = 0.4
scale_curve = SubResource("CurveTexture_ixbpm")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_c6leb"]
shading_mode = 2

[sub_resource type="SphereMesh" id="SphereMesh_xkffx"]
material = SubResource("StandardMaterial3D_c6leb")

[sub_resource type="BlackboardPlan" id="BlackboardPlan_ncmt4"]
binding/targets = NodePath("../Pivot/Vision:Targets")

[node name="Guard" type="CharacterBody3D"]
collision_layer = 4
script = ExtResource("1_ps64d")
GroundSpeed = 5.0
AirSpeed = 5.0
metadata/_custom_type_script = "uid://bw67ru2uktjdc"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.75, 0)
shape = SubResource("CylinderShape3D_p32lx")

[node name="Pivot" type="Node3D" parent="."]

[node name="Model" parent="Pivot" instance=ExtResource("2_p32lx")]

[node name="StandingAttack" parent="Pivot" instance=ExtResource("3_h42f4")]
transform = Transform3D(1.44889, -0.388229, 0, 0.388229, 1.44889, 0, 0, 0, 1.5, 0, 0.75, 0.44)
collision_layer = 4
collision_mask = 2
Damage = 5.0
Force = 5.0

[node name="Vision" parent="Pivot" instance=ExtResource("3_ps64d")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Pivot/Vision"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 8)
shape = SubResource("BoxShape3D_ps64d")

[node name="Dust" type="GPUParticles3D" parent="Pivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.4)
layers = 4
cast_shadow = 0
gi_mode = 0
emitting = false
explosiveness = 0.05
process_material = SubResource("ParticleProcessMaterial_vhper")
draw_pass_1 = SubResource("SphereMesh_xkffx")

[node name="BTPlayer" type="BTPlayer" parent="."]
behavior_tree = ExtResource("10_m4qf5")
blackboard_plan = SubResource("BlackboardPlan_ncmt4")
